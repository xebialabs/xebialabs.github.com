<html><head><LINK REL=StyleSheet HREF="css/deployit.css" TYPE="text/css" MEDIA=screen>
<LINK REL=StyleSheet HREF="css/ci-reference-api.css" TYPE="text/css" MEDIA=screen>
<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="js/jquery.tableofcontents.min.js"></script>
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
    document.body.id = "top-toc";
    var title = $("<div class='manual-title'/>")
    title.html("<div class='title'>Reference Manual</div><div class='version'>Version <span class='version-number'>3.5.2-SNAPSHOT</span></div>");
    $("body").css('width', '100%');
    $("body").prepend(title);
    $("body").prepend($("<ol id='toc'/>"));
    $("#toc").tableOfContents("body", { topLinks: true, } );
});

</script>
<title>Reference Manual</title>
</head><body><h1>Preface</h1><p>This manual contains reference information for users of Deployit.</p><h1>Deployment Overview</h1><p>Deployit is the first out-of-the-box deployment automation solution that allows non-experts to perform application deployments. A deployment consists of all the actions needed to install, configure and start an application on a target environment. </p><p>At a high level, deployments in Deployit are modeled using the <em>Unified Deployment Model (UDM)</em>. The following diagram depicts the main concepts in the UDM as they appear in the Deployit GUI:</p><p><img src="images/udm-highlevel-deployit.png"  alt="Unified Deployment Model"/></p><p>Deployments are defined by:</p>
<ul>
  <li>A <strong>Package</strong> containing <em>what</em> is to be deployed (shown on the left side of the picture).</li>
  <li>An <strong>Environment</strong> defining <em>where</em> the package is to be deployed (shown on the right side of the picture).</li>
  <li>Configuration of the <strong>Deployment</strong> specifying (possibly environment-specific) <em>customizations</em> to the package to be deployed (the middle square).</li>
</ul><p>Of course, packages and environments are made up of smaller parts:</p>
<ul>
  <li>Packages consist of <em>deployables</em> or <em>things that can be deployed</em>.</li>
  <li>Environments consist of <em>containers</em> or <em>things that can be deployed <em>to</em></em>.</li>
</ul><p>Deployables come in two flavors: <em>artifacts</em> are physical files (examples are an EAR file, a WAR file or a folder of static HTML) and <em>resource specifications</em> are middleware resources that the application needs to run (examples are a queue, a topic or a datasource). These types of deployables are put together in a package.</p><p>Containers are actual middleware that deployables can be deployed to. Examples of containers are an application server such as Tomcat or WebSphere, a WebSphere node or cell, a host or a database server.</p><p>Let's say we have a package that consists of an EAR file (an artifact), a datasource (a resource specification) and some configuration files (artifacts) and we want to deploy this package to an environment containing an application server and a host (both containers). The exact deployment could look something like this:</p><p><img src="images/udm-lowlevel-deployit.png"  alt="Unified Deployment Model Detail"/></p><p>In the above picture, you can see that the EAR file and the datasource are deployed to the application server and the configuration files are deployed to the host. </p><p>As you can see above, the deployment also consists of smaller parts. The combination of a particular deployable and container is called a <em>deployed</em>. Deployeds represent <em>the deployable on the container</em> and contain customizations for this specific deployable - container combination. For example, the <em>PetClinic-ds</em> deployed in the picture represents the datasource from the deployment package as it will be deployed to the <em>was.Server</em> container. The deployed allows a number of properties to be specified:</p><p><img src="images/udm-lowlevel-deployed-deployit.png"  alt="Unified Deployment Model - Deployed"/></p><p>For example, the deployed has a specific username and password that may be different when deploying the same datasource to another server.</p><p>Once a deployment is specified and configured using the concepts above (and the <em>what</em>, <em>where</em> and <em>customizations</em> are known), Deployit takes care of the <em>how</em> by preparing a list of steps that need to be executed to perform the actual deployment. Each step specifies one action to be taken, such as copying of a file, modifying a configuration file or restarting a server.</p><p>When the deployment is started, Deployit creates a <em>task</em> to perform the deployment. The task is an independent process running on the Deployit server. The steps are executed sequentially and the deployment is finished successfully when all steps have been executed. If an error occurs during deployment, the deployment stops and an operator is required to intervene.</p><p>The result of the deployment is stored in Deployit as a <em>deployed application</em> and is shown in the Deployed Application Browser on the right hand side of the GUI. The deployed applications are organised by environment so it is clear where the application is deployed to. It is also possible to see which parts of the deployed package have been deployed to which environment member.</p><p>The final result of our sample deployment looks like this:</p><p><img src="images/udm-lowlevel-deployedapplication-deployit.png"  alt="Unified Deployment Model - Deployed Application"/></p><h1>Interacting with Deployit</h1><p>There are two ways of interacting with Deployit and each is intended for a specific audience.</p><p>Performing tasks interactively is possible using the <strong>Graphical User Interface (GUI)</strong>. The GUI is a Flash application running inside a user's internet browser. After logging in, the user can configure and perform deployments, view and edit the repository and view reports (provided the user's permissions allow him to perform these tasks). In general, tasks that require graphical output or benefit from a graphical overview are performed in the GUI. See the <strong>Deployit Graphical User Interface (GUI)</strong> manual for more information.</p><p>The <strong>Command Line Interface (CLI)</strong> is used to automate Deployit tasks. The CLI is a Jython application that the user can access remotely. In addition to configuring and performing deploymenters, the user can also setup middleware and security permissions in the CLI. In general, the CLI is used to perform administrative tasks or automate deployment tasks. See the <strong>Deployit Command Line Interface (CLI)</strong> manual for more information.</p><p>Please note that Deployit's security system is applied to all user actions, regardless of whether they are performed in the GUI or from the CLI.</p><h1>Deployit Glossary</h1><p>These are the main concepts in Deployit, in alphabetical order.</p><h2>Artifacts</h2><p>Artifacts are files containing application resources such as code or images. The following are examples of artifacts:</p>
<ul>
  <li>a WAR file.</li>
  <li>an EAR file.</li>
  <li>a folder containing static content such as HTML pages or images.</li>
</ul><h2>Command Line Interface (CLI)</h2><p>The Deployit CLI provides a way to programmatically interact with Deployit. The CLI can be programmed using the <strong>Python</strong> programming language. For more detailed information, see the <strong>Deployit Command Line Interface Manual</strong>.</p><h2>Configuration Items (CIs)</h2><p>A <em>configuration item</em> (CI) is a generic term that describes all objects that Deployit keeps track of. Applications, middleware, environments and deployments in Deployit are all represented in Deployit as CIs. A CI has a certain <em>type</em> that determines what information it contains and what it can be used for. CIs have properties to describe it and may have relations to other CIs.</p><p>Deployit CIs all share one property:</p>
<ul>
  <li><strong>id</strong>. This is a unique identifier for this CI that can be used to reference it. The id determines the place of the CI in the <em>repository</em>.</li>
</ul><p>Some properties of a CI are mandatory (must be given a value before the CI can be used or stored), others are optional. To determine which properties are available and which are mandatory or optional for a CI, see the <strong>CI Reference</strong> section in this document (or the plugin manual for the plugin that the CI is a part of) or use the help facility in the Deployit <em>CLI</em>.</p><p>For example, a CI of type <em>udm.DeploymentPackage</em> represents a <em>deployment package</em>. It has properties containing it's version number. It contains child CIs for the <em>artifacts</em> and <em>resource specifications</em> it contains and has a link to a parent CI of type <em>udm.Application</em> which describes which application the package is a part of.</p><h2>Containers</h2><p><em>Containers</em> are configuration items (CIs) that <em>deployable</em> CIs can be deployed to. Containers are grouped together in an <em>environment</em>. Examples of containers are a host, WebSphere server or WebLogic cluster.</p><h2>Deployables</h2><p><em>Deployables</em> are configuration items (CIs) that can be deployed to a <em>container</em> CI. Deployables are part of a <em>deployment package</em>. Deployables come in two forms: <em>artifacts</em> (for instance, EAR files) and <em>specifications</em> (for instance, a datasource).</p><h2>Deployeds</h2><p><em>Deployeds</em> are configuration items (CIs) that represent <em>deployable</em> CIs as it is deployed on a target <em>container</em> CI. The deployed CI specifies settings that are relevant for the CI on the container. </p><p>For example, a <em>wls.Ear</em> deployable is deployed to a <em>wls.Server</em> container, resulting in a <em>wls.EarModule</em> deployed.</p><p>Another example is a <em>wls.DataSourceSpec</em> that is deployed to a <em>wls.Server</em> container, resulting in a <em>wls.DataSource</em> deployed. The <em>wls.DataSource</em> is configured with the database username and password that are required to connect to the database from this particular server.</p><p>Deployeds go through the following life-cycle:</p>
<ul>
  <li>the deployed is created on a target container for the first time in an <em>initial</em> deployment</li>
  <li>the deployed is upgraded to a new version in an <em>upgrade</em> deployment</li>
  <li>the deployed is removed from the target container when it is <em>undeployed</em>.</li>
</ul><h2>Deploying an Application</h2><p>This process installs a particular application version (represented by a <em>deployment package</em>) on an environment. Deployit copies all necessary files and makes all configuration changes to the target middleware that are necessary for the application to run.</p><h2>Deployment Archive (DAR) Format</h2><p>The DAR format is the native format Deployit supports for <em>deployment packages</em>. A DAR file is a standard ZIP file with additional metadata information contained in a manifest. For a comprehensive description of the DAR format, see the <strong>Deployit Packaging Manual</strong>.</p><h2>Deployment Package</h2><p>In the <strong>Unified Deployment Model</strong>, a particular version of an application (consisting of both artifacts and resource specifications) is contained in a single <em>deployment package</em>. The package contains all <em>deployables</em> that the application needs. The package is environment-independent and can be deployed to any environment unchanged (see the <strong>Unified Deployment Model</strong>).</p><p>Deployit accepts packages in the <em>Deployment ARchive (DAR)</em> format.</p><h2>Dictionaries</h2><p>A dictionary is a CI that contains environment-specific entries for placeholder resolution. Entries can be added in the GUI or using the CLI. This allows the deployment package to remain environment independent so it can be deployed unchanged to multiple environments.</p><p>For an example of using placeholders in CI properties, see the <strong>Deployit Packaging Manual</strong>.</p><h2>Environment</h2><p>An <em>environment</em> is a grouping of infrastructure items, such as hosts, servers, clusters, etc. Environments can contain any combination of infrastructure items that are used in your situation. An environment is used as the target of a deployment, allowing <em>deployables</em> to be mapped to members of the environment.</p><h2>Placeholders</h2><p>Placeholders are configurable entries in your application that will be set to an actual value at deployment time. This allows the deployment package to be environment-independent and thus reusable. </p><p>There are two types of placeholders. <em>File</em> placeholders occur inside of artifacts in the deployment package. Deployit scans packages that it imports for text files and searches these text files for file placeholders. The following items are scanned:</p>
<ul>
  <li>File-type CIs</li>
  <li>Folder-type CIs</li>
  <li>Archive-type CIs</li>
</ul><p><em>Property</em> placeholders are used in CI properties by specifying them in the package's manifest.</p><p>Deployit recognizes placeholders using the following format:</p>
<pre><code>{{PLACEHOLDER_KEY}}
</code></pre><p>Values for placeholders can be provided manually or filled in from a <em>dictionary</em>.</p><h2>Plugin</h2><p>A <em>plugin</em> is a self-contained piece of functionality that adds capabilities to the Deployit system. Plugins are packaged in a JAR file and installed in Deployit's plugins directory. Plugins can contain:</p>
<ul>
  <li>functionality to connect to specific middleware</li>
  <li>a new method to connect to a host</li>
  <li>a new importer</li>
</ul><h2>Repository</h2><p>The <em>repository</em> is a storage space for all things Deployit knows about. This includes configuration items (CIs), binary files (such as <em>deployment packages</em>) and Deployit's security configuration (user accounts and rights). The repository can be stored on disk (default) or in a database (see <strong>Configuring Database Storage</strong> in the <strong>System Administration Manual</strong>).</p><p>Each CI in Deployit has an id that uniquely identifies the CI. This id is a path that determines the place of the CI in the repository. For instance, a CI with id "Applications/PetClinic/1.0" will appear in the <strong>PetClinic</strong> subfolder under the <strong>/Applications</strong> root folder.</p><p>The repository has a hierarchical layout and a version history. All CIs of all types are stored here. The top-level folders indicate the type of CI stored below it. Depending on the type of CI, the repository stores it under a particular folder:</p>
<ul>
  <li>Application CIs are stored under the <strong>/Applications</strong> folder.</li>
  <li>Environment and Dictionary CIs are stored under the <strong>/Environments</strong> folder.</li>
  <li>Middleware CIs (representing hosts, servers, etc.) are stored under the <strong>/Infrastructure</strong> folder.</li>
</ul><h3>Containment and References</h3><p>Deployit's repository contains CIs that refer to other CIs. There are two ways in which CIs can refer to each other:</p>
<ul>
  <li><strong>Containment</strong>. In this case, one CI <em>contains</em> another CI. If the parent CI is removed, so is the child CI. An example of this type of reference is an Environment CI and it's deployed applications.</li>
  <li><strong>Reference</strong>. In this case, one CI <em>refers</em> to another CI. If the referring CI is removed, the referred CI is unchanged. Removing a CI when it is still being referred to is not allowed. An example of this type of reference is an Environment CI and it's middleware. The middleware exists in the <strong>/Infrastructure</strong> folder independently of the environments the middleware is in.</li>
</ul><h3>Deployed Applications</h3><p>A deployed application is the result of deploying a <em>deployment package</em> to an <em>environment</em>. Deployed applications have a special structure in the repository. While performing the deployment, package members are installed as <em>deployed items</em> on individual environment members. In the repository, the <em>deployed application</em> CI is stored under the <em>Environment</em> node. Each of the <em>deployed items</em> are stored under the infrastructure members in the <em>Infrastructure</em> node.</p><p>So, deployed applications exist in both the <strong>/Environment</strong> as well as <strong>/Infrastructure</strong> folder. This has some consequences for the security setup. See the <strong>Deployit System Administration Manual</strong> for details.</p><h2>Resource Specifications</h2><p>Resource specifications are specifications of middleware resources that an application needs to run. The following are examples of these resources:</p>
<ul>
  <li>a datasource.</li>
  <li>a queue or topic.</li>
  <li>a connection factory.</li>
</ul><h2>Security</h2><p>Deployit supports a fine-grained access control scheme to ensure the security of your middleware and deployments. The security mechanism is based on the concepts of <em>principals</em> and <em>permissions</em>. A (security) principal is an entity that can be authenticated and that can be assigned rights over resources in Deployit. Principals are assigned certain permissions within the system. These permissions can be either global (that is, they apply to all of Deployit, such as login permission) or relevant for a particular CI or set of CIs (for instance, the permission to read certain CIs in the repository).</p><p>The security system uses the same permissions whether the system is accessed via the GUI or the CLI.</p><p>For more information about Deployit's security system, see the <strong>System Administration Manual</strong>.</p><h2>Step</h2><p>A step is a concrete action to be performed to accomplish a <em>task</em>. Steps are contributed by <em>plug-ins</em> based on the deployment that is being performed. All steps for a particular deployment are grouped together in a <em>steplist</em>. Deployit ships with many step implementations for common actions. Other, middleware-specific steps are contributed by the plugins.</p><p>The following are examples of steps:</p>
<ul>
  <li>copy file /foo/bar to host1, directory /bar/baz.</li>
  <li>install petclinic.ear on the WAS server on was1.</li>
  <li>restart the Apache HTTP server on web1.</li>
</ul><h2>Steplist</h2><p>A steplist is a sequential list of <em>steps</em> that are contributed by one or more <em>plugins</em> when a deployment is being planned.</p><h2>Task</h2><p>A task is an activity in Deployit. When starting a deployment, Deployit will create and start a task. The task contains a list of <em>steps</em> that must be executed to successfully complete the task. Deployit will execute each of the steps in turn. When all of the steps are successfully executed, the task itself is successfully executed. If one of the steps fails, the task itself is marked stopped.</p><p>Deployit supports the following tasks:</p>
<ul>
  <li><strong>deploy application</strong>. This task deploys a package onto an environment.</li>
  <li><strong>update application</strong>. This task updates an existing deployment of an application.</li>
  <li><strong>undeploy application</strong>. This task undeploys a package from an environment.</li>
  <li><strong>discovery</strong>. This task discovers middleware on a host.</li>
</ul><h3>Task Recovery</h3><p>Deployit periodically stores a snapshot of the tasks in the system to be able to recover tasks if the server crashes. If this happens, Deployit reloads the tasks from the recovery file when it restarts. The tasks, deployed item configurations and generated steps will all be recovered. Tasks that were running in Deployit when the server crashed will be put in stopped state so the user can decide whether to rerun or cancel it. Only tasks that have been started will be recovered.</p><h3>Task State</h3><p>Deployit allows a user to interact with the task. In addition to starting a task, a user can:</p>
<ul>
  <li><strong>stop the task</strong>. Deployit will wait for the currently executing step to finish and will then cleanly stop the task. Note that, due to the nature of some steps, this is not always possible. For example, a step that calls an external script may hang indefinitely.</li>
  <li><strong>abort the task</strong>. Deployit will attempt to kill the currently executing step. If successful, the aborted step and task are marked failed.</li>
  <li><strong>cancel the task</strong>. Deployit will remove the task from the system. If the task was executing before, the task will be archived since it may have made changes to the middleware. If the task was pending and never started, it will be removed but not stored.</li>
</ul><h2>Type System</h2><p>Deployit features a configurable type system that allows modification and addition of CI types. This makes it possible to extend your installation of Deployit with new types or change existing types. Types defined in this manner are referred to as <em>synthetic</em> types. The type system is configured using XML files called <em>synthetics.xml</em>. All files containing synthetics are read when the Deployit server starts and are available in the system afterwards.</p><p>Synthetic types are first-class citizens in Deployit and can be used in the same way that the built-in types are used. This means they can be included in deployment packages, used to specify your middleware topology and used to define and execute deployments. Synthetic types can also be edited in the Deployit GUI, including new types and added properties.</p><p>For more information about extending Deployit, see the <strong>Customization Manual</strong>.</p><h2>Undeploying an Application</h2><p>This process removes a <em>deployed application</em> from an <em>environment</em>. Deployit stops the application and undeploys all it's components from the target middleware.</p><h2>Unified Deployment Model (UDM)</h2><p>The UDM is XebiaLabs' model for describing deployments and is used in Deployit. The UDM consists of the following components:</p>
<ul>
  <li><strong>Deployment Package</strong>. This is an environment-independent package containing <em>deployables</em>, CIs that together form a complete application.</li>
  <li><strong>Environment</strong>. This is an environment containing <em>containers</em> (deployment targets, i.e. servers that applications can be deployed on). An example is a test environment containing a cluster of WebSphere servers.</li>
  <li><strong>Deployment</strong>. This is the process of configuring and installing a <em>deployment package</em> onto a specific <em>environment</em>. It results in <em>deployeds</em> describing the coupling of a <em>deployable</em> and a <em>container</em>.</li>
</ul><h2>Upgrading an Application</h2><p>This process replaces an application deployed to an <em>environment</em> with another version of the same application. When performing an upgrade, most <em>deployeds</em> can be inherited from the initial deployment. Deployit recognizes which artifacts in the deployment package have changed and deploys only the changed artifacts.</p></body></html>