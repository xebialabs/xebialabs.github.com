<html><head><LINK REL=StyleSheet HREF="css/deployit.css" TYPE="text/css" MEDIA=screen>
<LINK REL=StyleSheet HREF="css/ci-reference-api.css" TYPE="text/css" MEDIA=screen>
<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="js/jquery.tableofcontents.min.js"></script>
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
    $("body").attr('id', 'top-toc');
    var title = $("<div class='manual-title'/>")
    title.html("<div class='title'>IBM WebSphere MQ Plugin Manual</div><div class='version'>Version <span class='version-number'>3.7.0-beta-1</span></div>");
    $("body").css('width', '100%');
    $("body").prepend(title);
    $("body").prepend($("<ol id='toc'/>"));
    $("#toc").tableOfContents("body", { topLinks: true, } );
});

</script>
<title>IBM WebSphere MQ Plugin Manual</title>
</head><body><h1>Preface</h1><p>This document describes the functionality provided by the Websphere MQ plugin.</p><p>See the <strong>Deployit Reference Manual</strong> for background information on Deployit and deployment concepts.</p><h1>Overview</h1><p>The WMQ plugin is a Deployit plugin that adds the capability to manage MQ resources on Websphere MQ environment. It works out of the box for deploying/ undeploying local queues and alias queues on a queue manager and can easily be extended to support management of other possible resources on a Websphere MQ environment.</p><h2>Features</h2>
<ul>
  <li>Resources
  <ul>
    <li>Local Queue</li>
    <li>Alias Queue</li>
  </ul></li>
  <li>Control Taks
  <ul>
    <li>Start/Stop queue manager</li>
  </ul></li>
</ul><h1>Requirements</h1>
<ul>
  <li><p><strong>Deployit requirements</strong></p>
  <ul>
    <li><strong>Deployit</strong>: version 3.6+</li>
    <li><strong>Websphere MQ</strong>: 7.x</li>
    <li><strong>Other Deployit Plugins</strong>: None</li>
  </ul></li>
  <li><p><strong>Infrastructural requirements</strong></p>
  <ul>
    <li><strong>User credentials</strong> for accessing the Host running Websphere MQ, and should be having the rights to run WMQ commands.</li>
  </ul></li>
</ul><h1>Usage in Deployment Packages</h1><p>The plugin works with the standard deployment package DAR format. Please see the <em>Packaging Manual</em> for more details about the DAR format and the ways to compose one. </p><p>The following is a sample MANIFEST.MF file that can be used to create a WMQ specific deployment package. It contain declarations for a <a href="#wmq.LocalQueueSpec">LocalQueue</a>, and an <a href="#wmq.AliasQueueSpec">AliasQueue</a>.</p>
<pre style="display:inline-block; nobreak"><code>
Manifest-Version: 1.0
Deployit-Package-Format-Version: 1.3
CI-Application: wmqApp
CI-Version: 1.0

Name: testLocalQueue
CI-Type: wmq.LocalQueueSpec
CI-maxDepth: 3
CI-boqname: testBackoutQueue
CI-bothresh: 10

Name: testAliasQueue
CI-Type: wmq.AliasQueueSpec
CI-target: testTargetQueue
CI-cluster: QUEUE_CLUSTER
</code></pre><h1>Using the deployables and deployeds</h1><p>The following table describes which deployable/container combinations are possible.</p><h2>Deployable vs. Container table</h2>
<table class="deployed-matrix">
<tr>
	<th>Deployable</th>
	<th>Container</th>
	<th>Generated deployed</th>
</tr>
<tr>
	<td>wmq.LocalQueueSpec</td>
	<td>wmq.QueueManager</td>
	<td>wmq.LocalQueue</td>
</tr>
<tr>
	<td>wmq.AliasQueueSpec</td>
	<td>wmq.QueueManager</td>
	<td>wmq.AliasQueue</td>
</tr>
</table><p>The following table describes the effect a deployed has on it's container</p><h2>Deployed Actions Table</h2>
<table class="deployed-matrix">
<tr>
	<th class="borderless-bottom">Deployed</th>
	<th colspan="3">Actions performed for operations</th>
</tr>
<tr>
	<th class="borderless-top">&nbsp;</th>
	<th align="center">Create</th>
	<th align="center">Destroy</th>
	<th align="center">Modify</th>
</tr>
<tr>
	<td>wmq.LocalQueue</td>
	<td>
		<ul>
			<li>create local queue on queue manager</li>
		</ul>
      </td>
	<td>
		<ul>
			<li>delete local queue</li>
		</ul>
	</td>
	<td>
		<ul>
			<li>alter local queue</li>
		</ul>
</tr>
<tr>
	<td>wmq.AliasQueue</td>
	<td>
		<ul>
			<li>create queue alias on queue manager</li>
		</ul>
	</td>
	<td>
		<ul>
			<li>delete queue alias</li>
		</ul>
	</td>
	<td>
		<ul>
			<li>alter queue alias</li>
		</ul>
	</td>
</tr>
</table><h1>Queue manager</h1><p>wmq.QueueManager is a container type which represents an existing queue manager running in the MQ environment, and the MQ resources like local queue or alias queue can be targeted to it. It has a containment relationship with Host, which means that it can only be created under a Host. Also, since a wmq.QueueManager is meant to represent an existing queue manager, the name of the CI should reflect the existing queue manager name. For example if the existing queue manager running in the MQ environment is called VENUS, the wmq.QueueManager CI should be called VENUS.</p><p>wmq.QueueManager also supports control tasks for starting and stopping the queue manager. Please refer to the CLI or GUI manual to know more on how to use control tasks.</p><h1>Extension points</h1><p>The WMQ plugin is designed to be extended through Deployit's Plugin API type system. Also, since the WMQ plugin is built on top of the generic-plugin, support for new types can be added using the generic plugin patterns. Refer to the <em>Generic Plugin Manual</em> for more details. Also, refer to the <em>Customization Manual</em> for an explanation of the type system.</p><p>The next section describes extensibility by examples:</p><h1>Extending the WMQ Plugin</h1><p><strong>Making an existing property hidden/visible or changing the default value</strong></p><p>The following synthetic.xml snippet shows how the <em>maxDepth</em> property can be made hidden with a default value set on it in the <em>wmq.LocalQueue</em> type:</p>
<pre><code>&lt;type-modification type=&quot;wmq.LocalQueue&quot;&gt;
  &lt;!-- make it hidden, and give a default value if all the local queues are always created with the maxDepth value of 3--&gt;
  &lt;property name=&quot;maxDepth&quot; kind=&quot;integer&quot; default=&quot;3&quot; hidden=&quot;true&quot;/&gt;
&lt;/type-modification&gt;
</code></pre><p><strong>Adding a new property to a deployed/deployable</strong></p><p>The following synthetic.xml snippet shows how a new property 'DEFPRTY'(for specifying the default priority) can be added to the <em>wmq.LocalQueue</em> type:</p>
<pre><code>&lt;type-modification type=&quot;wmq.LocalQueue&quot;&gt;
    &lt;!-- adding new property for setting the default priority--&gt;
    &lt;property name=&quot;defprty&quot; kind=&quot;integer&quot; default=&quot;3&quot; label=&quot;default priority&quot; 
    description=&quot;The default priority of messages put on the queue. The value must be in the range zero 
    (the lowest priority) through to the MAXPRTY queue manager parameter. (MAXPRTY is 9.)&quot;/&gt;
&lt;/type-modification&gt;    
</code></pre><p>Note that while adding a new property in the WMQ plugin, <em>the property name should match exactly with the the WMQ command parameter name</em>. Hence the property has been called <code>defprty</code> and not 'defaultProperty' or 'defPriority'. Also, a label can be specified for the property to give it a user-friendly name on the UI. In the example above, the property <code>defprty</code> will appear as <code>default priority</code> on the UI. </p><p><strong>Adding a new type</strong></p><p>New types can be added in WMQ plugin using the <code>Generic Plugin</code> patterns. For example, the following synthetic.xml snippet defines a new deployed type <em>wmq.ModelQueue</em> (and the corresponding deployable type <em>wmq.ModelQueueSpec</em>, which will be automatically generated from the deployed definition):</p>
<pre><code>&lt;type type=&quot;wmq.ModelQueue&quot; extends=&quot;wmq.Resource&quot; deployable-type=&quot;wmq.ModelQueueSpec&quot; 
                                     container-type=&quot;wmq.QueueManager&quot;&gt;
    &lt;generate-deployable type=&quot;wmq.ModelQueueSpec&quot; extends=&quot;generic.Resource&quot;/&gt;
    &lt;property name=&quot;createScript&quot; hidden=&quot;true&quot; default=&quot;wmq/create-qmodel&quot; /&gt;
    &lt;property name=&quot;modifyScript&quot; hidden=&quot;true&quot; default=&quot;wmq/modify-qmodel&quot; /&gt;
    &lt;property name=&quot;destroyScript&quot; hidden=&quot;true&quot; default=&quot;wmq/destroy-qmodel&quot; /&gt;
    &lt;property name=&quot;maxDepth&quot; kind=&quot;integer&quot; description=&quot;The maximum number of messages allowed on the queue&quot;/&gt;
&lt;/type&gt;
</code></pre><p>Once this new type has been added in the synthetic.xml, the new types <em>wmq.ModelQueueSpec</em> and <em>wmq.ModelQueue</em> is readily available to the Deployit type system. But to make it usable completely, the corresponding scripts must be added at the specified path. This is how the create script <em>wmq/create-qmodel.sh</em> might look:</p>
<pre><code>#!/bin/sh
echo &quot;DEFINE QMODEL(${deployed.name}) ${deployed.parameters}&quot; 
       | ${deployed.container.executablesDirectory}/runmqsc ${deployed.container.name}
</code></pre><p>Similarly, below is an example destroy script <em>wmq/destroy-qmodel.sh</em> for the newly defined type:</p>
<pre><code>#!/bin/sh
echo &quot;DELETE QMODEL(${deployed.name})&quot; | ${deployed.container.executablesDirectory}/runmqsc ${deployed.container.name}
</code></pre><p>On similar lines, the modify script can be specified containing the alter command for altering the model queue.</p><div style='width:100%; position:relative'>
<h1 class='ci-toc-category'>CI Reference</h1><h2>Configuration Item Overview</h2><h3 class='ci-toc-category'>Virtual Deployed Configuration Items</h3><table class='ci-toc nobreak'  cellspacing='0' cellpadding='3'><tr class='odd ci-toc-header'><th>CI</th><th>Description</th></tr>
<tr class='even'><td><a href='#wmq.Resource'>wmq.Resource</a></td><td>Description unavailable</td>
</table>
<h2 class='ci-details-title'>Configuration Item Details</h2><a name='wmq.Resource'></a><h3 class='ci-detail-title'>wmq.Resource</h3><div><table class='ci-relations-table'><tr><th>Hierarchy</th><td><span>generic.ExecutedScript</span><span> >> </span><span>generic.AbstractDeployed</span><span> >> </span><span>udm.BaseDeployed</span><span> >> </span><span>udm.BaseConfigurationItem</span></td></tr><tr><th>Interfaces</th><td><span>udm.Deployed</span><span>, </span><span>udm.ConfigurationItem</span></td></tr></table></div><p class='ci-description'>Description unavailable</p>
<table class='ci-properties nobreak'  cellspacing='0' cellpadding='3'><tr class='odd ci-prop-header'><th>Public Properties</th></tr><tr class='even'><td><img title='Containment relationship' class='containerImg' src='image/container.png'/><a name='wmq.Resource_container'></a><span class='ci-property-name'>container</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>CI&lt;udm.Container&gt;</span><p class='ci-property-desc'>The container on which this deployed runs.</p></td>
<tr class='odd'><td><a name='wmq.Resource_deployable'></a><span class='ci-property-name'>deployable</span>&nbsp;:&nbsp;<span class='ci-property-kind'>CI&lt;udm.Deployable&gt;</span><p class='ci-property-desc'>The deployable that this deployed is derived from.</p></td>
</table>
<table class='ci-properties nobreak'  cellspacing='0' cellpadding='3'><tr class='odd ci-prop-header'><th>Hidden Properties</th></tr><tr class='even'><td><a name='wmq.Resource_createOrder'></a><span class='ci-property-name'>createOrder</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>INTEGER</span>&nbsp;=&nbsp;<span class='ci-property-default'>50</span><p class='ci-property-desc'>The order of the step in the step list for the create operation.</p></td>
<tr class='odd'><td><a name='wmq.Resource_createScript'></a><span class='ci-property-name'>createScript</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Classpath to the script that is uploaded and executed on the generic container for the create operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_createVerb'></a><span class='ci-property-name'>createVerb</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span>&nbsp;=&nbsp;<span class='ci-property-default'>Create</span><p class='ci-property-desc'>Create Verb</p></td>
<tr class='odd'><td><a name='wmq.Resource_destroyOrder'></a><span class='ci-property-name'>destroyOrder</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>INTEGER</span>&nbsp;=&nbsp;<span class='ci-property-default'>40</span><p class='ci-property-desc'>The order of the step in the step list for the destroy operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_destroyVerb'></a><span class='ci-property-name'>destroyVerb</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span>&nbsp;=&nbsp;<span class='ci-property-default'>Destroy</span><p class='ci-property-desc'>Destroy Verb</p></td>
<tr class='odd'><td><a name='wmq.Resource_modifyOrder'></a><span class='ci-property-name'>modifyOrder</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>INTEGER</span>&nbsp;=&nbsp;<span class='ci-property-default'>50</span><p class='ci-property-desc'>The order of the step in the step list for the modify operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_modifyVerb'></a><span class='ci-property-name'>modifyVerb</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span>&nbsp;=&nbsp;<span class='ci-property-default'>Modify</span><p class='ci-property-desc'>Modify Verb</p></td>
<tr class='odd'><td><a name='wmq.Resource_noopOrder'></a><span class='ci-property-name'>noopOrder</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>INTEGER</span>&nbsp;=&nbsp;<span class='ci-property-default'>50</span><p class='ci-property-desc'>The order of the step in the step list for the noop operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_noopVerb'></a><span class='ci-property-name'>noopVerb</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span>&nbsp;=&nbsp;<span class='ci-property-default'>Modify</span><p class='ci-property-desc'>Noop Verb</p></td>
<tr class='odd'><td><a name='wmq.Resource_standardPropertiesNotToExpose'></a><span class='ci-property-name'>standardPropertiesNotToExpose</span><span class='required'>&nbsp;</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span>&nbsp;=&nbsp;<span class='ci-property-default'>deployable, container, createOrder, createScript, createVerb, modifyOrder, modifyScript, modifyVerb, destroyOrder, destroyScript, destroyVerb, startOrder, startScript, startVerb, stopOrder, stopScript, stopVerb, inspectScript, inspectVerb, securityPermissions, inheritPermissions</span><p class='ci-property-desc'>Standard properties that are not exposed to any python wsadmin script.</p></td>
<tr class='even'><td><a name='wmq.Resource_classpathResources'></a><span class='ci-property-name'>classpathResources</span>&nbsp;:&nbsp;<span class='ci-property-kind'>SET_OF_STRING</span><p class='ci-property-desc'>Additional classpath resources that should be uploaded to the working directory before executing the script.</p></td>
<tr class='odd'><td><a name='wmq.Resource_destroyScript'></a><span class='ci-property-name'>destroyScript</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Classpath to the script that is uploaded and executed on the generic container for the destroy operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_inspectClasspathResources'></a><span class='ci-property-name'>inspectClasspathResources</span>&nbsp;:&nbsp;<span class='ci-property-kind'>SET_OF_STRING</span><p class='ci-property-desc'>Additional classpath resources that should be uploaded to the working directory before executing the inspect script.</p></td>
<tr class='odd'><td><a name='wmq.Resource_inspectScript'></a><span class='ci-property-name'>inspectScript</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Classpath to the script used to inspect the generic container.</p></td>
<tr class='even'><td><a name='wmq.Resource_inspectTemplateClasspathResources'></a><span class='ci-property-name'>inspectTemplateClasspathResources</span>&nbsp;:&nbsp;<span class='ci-property-kind'>SET_OF_STRING</span><p class='ci-property-desc'>Additional template classpath resources that should be uploaded to the working directory before executing the inspect script.The template is first rendered and the rendered content copied to a file, with the same name as the template, in the working directory.</p></td>
<tr class='odd'><td><a name='wmq.Resource_modifyScript'></a><span class='ci-property-name'>modifyScript</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Classpath to the script that is uploaded and executed on the generic container for the modify operation.</p></td>
<tr class='even'><td><a name='wmq.Resource_noopScript'></a><span class='ci-property-name'>noopScript</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Classpath to the script that is uploaded and executed on the generic container for the noop operation.</p></td>
<tr class='odd'><td><a name='wmq.Resource_remoteWorkingDirectoryPath'></a><span class='ci-property-name'>remoteWorkingDirectoryPath</span>&nbsp;:&nbsp;<span class='ci-property-kind'>STRING</span><p class='ci-property-desc'>Name of working directory on target host. Default is to create a temporary directory which is deleted when connection is closed.</p></td>
<tr class='even'><td><a name='wmq.Resource_restartRequired'></a><span class='ci-property-name'>restartRequired</span>&nbsp;:&nbsp;<span class='ci-property-kind'>BOOLEAN</span>&nbsp;=&nbsp;<span class='ci-property-default'>false</span><p class='ci-property-desc'>The generic container requires a restart for the action performed by this deployed.</p></td>
<tr class='odd'><td><a name='wmq.Resource_restartRequiredForNoop'></a><span class='ci-property-name'>restartRequiredForNoop</span>&nbsp;:&nbsp;<span class='ci-property-kind'>BOOLEAN</span>&nbsp;=&nbsp;<span class='ci-property-default'>false</span><p class='ci-property-desc'>The generic container requires a restart for the NOOP action performed by this deployed.</p></td>
<tr class='even'><td><a name='wmq.Resource_retainRemoteWorkingDirectory'></a><span class='ci-property-name'>retainRemoteWorkingDirectory</span>&nbsp;:&nbsp;<span class='ci-property-kind'>BOOLEAN</span>&nbsp;=&nbsp;<span class='ci-property-default'>false</span><p class='ci-property-desc'>Retain the specified working directory on target host after completion.</p></td>
<tr class='odd'><td><a name='wmq.Resource_templateClasspathResources'></a><span class='ci-property-name'>templateClasspathResources</span>&nbsp;:&nbsp;<span class='ci-property-kind'>SET_OF_STRING</span><p class='ci-property-desc'>Additional template classpath resources that should be uploaded to the working directory before executing the script.The template is first rendered and the rendered content copied to a file, with the same name as the template, in the working directory.</p></td>
</table>
<hr class='ci-details-separator'/>
</div>
</body></html>